---
layout: post
title: 操作系统期末复习题(3)
tags: 操作系统
categories:
  - 操作系统习题
date: 2022-01-08 20:32:28
---




考察知识点：逻辑地址和物理地址的转换，访问时间

<!--more-->

![image-20220108203307144](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201082033213.png)

```
参考解答：
(1)
逻辑地址和物理地址之间的转换规则：
偏移量不变，页号转换成物理块块号
每个页面1KB，即一个页面的大小为1KB(2^10B)，
∴偏移量占10位
用户空间占32KB(2^15)——>逻辑地址占15位
∴页号位数=逻辑地址位数-偏移量位数=15-10=5
主存16KB(2^14)——>物理地址占14位，
∴物理块块号位数=物理地址位数-偏移量位数=14-10=4

0AC5H转换成二进制为：
000 1010 1100 0101
页号为000 10，转换成十进制数为2，
查页表得：页号为2，对应的物理块块号为4，
将4转换成4位的二进制数为0100
又∵偏移量为10 1100 0101
∴0AC5H对应的物理地址为01 0010 1100 0101，
转换成十六进制数为(12C5)H

1AC5H转换成二进制为：
001 1010 1100 0101
页号为001 10，转换成十进制数为6，
查页表得：页号为6，对应的物理块块号为2，
将2转换成4位的二进制数为0010
又∵偏移量为10 1100 0101
∴1AC5H对应的物理地址为00 1010 1100 0101，
转换成十六进制数为(0AC5)H
```

```
(2)
访问0AC5H，该页表项不在TLB中，因此需访问一次内存的页表取出物理块块号，
跟偏移量拼接成物理地址后，还需访问一次内存，取操作数。故耗费的时间为
20(10+10)ns。
访问1AC5H，该页表项在TLB中，因此将TLB中查询出的物理块块号和偏移量拼接成
物理地址后，需访问一次内存，取操作数。故耗费的时间为10ns。
```



考察知识点：磁盘调度算法

![image-20220109091505759](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201090915831.png)

```
参考解答：
(1)
最短寻道时间优先算法(SSTF、Shortest Seek Time First):
SSTF调度算法会选择这样的进程，其要求访问的磁道与当前磁头所在的磁道距离最近，
以使每次的寻道时间最短，但这种算法不能保证平均寻道时间最短。
此时磁头位于15柱面，则调度顺序为
16、13、9、20、24、29
寻道距离=(16-15)+(16-13)+(13-9)+(20-9)+(24-20)+(29-24)
=1+3+4+11+4+5=28
(2)
SCAN算法类似于电梯的运行规律
不仅会考虑欲访问的磁道与当前磁道间的距离，还会优先考虑磁头当前的移动方向。
∵移臂方向正在向着磁道号增加的方向移动
∴调度顺序为
16、20、24、29、13、9
寻道距离=(16-15)+(20-16)+(24-20)+(29-24)+(29-13)+(13-9)
=1+4+4+5+16+4=34
(3)
原因：
最短寻道时间优先算法(SSTF)的实质是基于优先级进行调度，
可能会导致优先级低的进程出现"饥饿"现象。
```

![image-20220109093948750](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201090939815.png)



考察知识点：索引文件

![image-20220109094106433](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201090941479.png)

```
参考解答：
(1)
由题意得：
一个文件索引表能存放的磁盘块块号的个数=1KB/5B
=1024B/5B=204...4
即最多能存放204个磁盘块块号
因该文件系统采用二级索引文件结构，
(主索引指向第二级索引，第二级索引指向磁盘块)，
一个磁盘块大小为1KB
∴能支持的最大文件大小为
204*204*1KB=41616KB

最大磁盘空间与磁盘块号个数和磁盘块大小相关：
磁盘块块号占5B，即占5*8=40位
∴最多有2^40个磁盘块号，即最多有2^40个磁盘块
又∵一个磁盘块的大小为1KB
∴能管理的最大磁盘空间是2^40*1KB=2^40KB=2^50B
∵1PB=1024TB
1TB=1024GB
1GB=1024MB
1MB=1024KB
1KB=1024B
∴1PB=2^50B
∴能管理的最大磁盘空间是1PB

(2)
```

![image-20220109100550583](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201091005646.png)




考察知识点：进程同步

![image-20220109101055346](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201091010393.png)

```
参考解答：
定义如下信号量：
empty1=5，表示1号缓冲区还能存放的整数个数，一开始1号缓冲区为空，
∴1号缓冲区能存放的整数个数为5
empty2=5，表示2号缓冲区还能存放的整数个数，一开始2号缓冲区为空，
∴2号缓冲区能存放的整数个数为5
full1=0，表示1号缓冲区已经存放的整数个数，一开始1号缓冲区为空，
∴1号缓冲区已经存放的整数个数为0
full2=0，表示2号缓冲区已经存放的整数个数，一开始2号缓冲区为空，
∴2号缓冲区已经存放的整数个数为0
mutex1=1，表示锁信号量，用来使得进程A和进程B互斥地访问1号缓冲区
mutex2=1，表示锁信号量，用来使得进程A和进程C互斥地访问2号缓冲区

A(){
    while(1){
        读出数据
        if(数据%2==0){
            P(empty1);
            P(mutex1);
            将数据放入1号缓冲区
            V(mutex1);
            V(full1);
        }else{
            P(empty2);
            P(mutex2);
            将数据放入2号缓冲区
            V(mutex2);
            V(full2);
        }
    }  
}

B(){
    while(1){
        P(full1);
        P(mutex1);
        从1号缓冲区读出数据，并累计求和
        V(mutex1);
        V(empty1);
    }
}

C(){
    while(1){
        P(full2);
        P(mutex2);
        从2号缓冲区读出数据，并累计求和
        V(mutex2);
        V(empty2);
    }
}

void main(){
    cobegin
        A();
        B();
        C();
    coend
}
```



考察知识点：分页存储管理

![image-20220109101737067](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201091017123.png)

![image-20220109101748780](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201091017842.png)

```
参考解答：
(1)
页表：每一个页表项记录了页号对应的物理块块号
J3的页表内容如下图所示：
【分页存储管理中，页号从0开始编号】
```

| 页号 | 物理块块号 |
| :--: | :--------: |
|  0   |     3      |
|  1   |     4      |
|  2   |     6      |
|  3   |     8      |

```
(2)
要访问的逻辑地址有500、1500、3100
```

<a href="https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201091330376.png" style="color:red;border-bottom:none;">MOV指令的格式是什么？</a> :point_left:

![image-20220109133046326](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201091330376.png)

```
页号=逻辑地址/页面大小并向下取整
偏移量=逻辑地址 MOD 页面大小
页面大小占1KB(1024B)

逻辑地址500:
页号=500/1024=0
偏移量=500 MOD 1024=500
查找页表，得页号为0，对应的物理块块号为3，
∴物理地址=物理块号*物理块大小+偏移量
又∵物理块的大小=页的大小【书本P154，分页存储管理方式，页和块的大小相同】
∴物理地址=3*1024+500=3572

逻辑地址1500：
页号=1500/1024=1
偏移量=1500 MOD 1024=476
查找页表，得页号为1，对应的物理块块号为4，
∴物理地址=4*1024+476=4572

逻辑地址3100：
页号=3100/1024=3
偏移量=3100 MOD 1024=28
查找页表，得页号为3，对应的物理块块号为8，
∴物理地址=8*1024+28=8220

(3)
由于没有缺页，对每个地址的内存访问时间相同，
访问逻辑地址500：
∵引入快表的分页存储管理方式中，有效访问时间由两部分组成：
①形成物理地址的时间【查快表命中的时间+查快表未命中，访问页表获取物理块块号的时间】
②取操作数的时间
即，引入快表后的内存有效访问时间=α X λ +（1-α) X (t+λ) + t
【其中α表示快表的命中率，λ表示查快表的时间，t表示访问一次内存的时间】
据题意，α=0.75，λ=0，t=100ns，代入上式，得：
访问时间=(1-0.75) X 100 + 100=125ns

完成J3上述指令，需要进行3次地址的访问，故
3个逻辑地址的访问时间：125*3=375ns
```



没必要继续刷题了，平时老师布置了这么多习题，全消化掌握了即可。剩余的时间，我准备看平时练习。

最后预祝各位操作系统能取得令自己满意的分数。🎉🎉🎉

