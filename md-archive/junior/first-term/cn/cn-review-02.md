---
layout: post
title: 计算机网络期末复习题(2)
tags: 计算机网络
categories:
  - 计算机网络习题
date: 2021-12-29 09:38:43
---



更正：

+ 第1题的第2小问，应该是`R1与R2之间的链路所分配到的CIDR地址块是10.0.0.144/30`，原错误

  答案已经用删除线标注。
+   子网划分解法改进

感谢网友Velpro的指正。:thumbsup:

[子网划分通俗易懂讲解视频](https://www.bilibili.com/video/BV19D4y197uD?from=search&seid=13566697261921488572&spm_id_from=333.337.0.0)

```
子网划分的一般步骤：
1)确定要借几位作为子网号
2)确定每个子网的子网掩码
3)确定子网的网络地址
4)确定子网的广播地址
5)确定子网的可用IP地址范围
```



考察知识点：再现子网划分、静态路由、IP数据报分片

<!--more-->

![image-20211229094421123](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112290944214.png)

```
参考解答：
这道题目是已经划分好了子网，要你求解相应的网络地址、广播地址......
因此先将其划分子网的每个网段给罗列出来，具体见下方图片。
(1)
销售部网络中的最小IP地址为10.0.0.1，最大网络地址为10.0.0.62
∴该网络的可分配的IP地址有62个，一共有64(2^6)个IP地址，故主机号部分为6位，
网络号部分=32-6=26位
∴销售部网络的子网掩码为/26，即255.255.255.192
由网络地址=IP地址和子网掩码相与，可得
销售部网络的网络地址=10.0.0.00000001 and 255.255.255.11000000
=10.0.0.00000000，转换成十进制为10.0.0.0

财务部网络中的最大IP地址为10.0.0.94，又
∵广播地址=最大IP地址+1
∴财务部网络的广播地址为10.0.0.95

技术部还剩10.0.0.113~10.0.0.125这13个IP地址
质检部还剩余的可分配地址数为0

```

(2)
~~R1与R2之间的链路所分配到的CIDR地址块是10.0.0.128/28~~
<font color="red">R1与R2之间的链路所分配到的CIDR地址块是10.0.0.144/30</font>


```
(3)
给路由器R1添加的静态路由：
10.0.0.96 255.255.255.224 10.0.0.146
10.0.0.128 255.255.255.240 10.0.0.146
给路由器R2添加的静态路由：
10.0.0.0 255.255.255.192 10.0.0.145
10.0.0.64 255.255.255.224 10.0.0.145
```

<a href="https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112310856335.png" style="color:red;border-bottom:none">看不清楚图片，请戳我！</a> :point_left:

![demo01](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112310912528.png)



<font color="red" size=3>注：以下是第4小问的错误解答!</font>

```
(4)
IP数据报长度=IP首部长度+IP数据部分长度
IP数据部分长度=IP数据报长度-IP首部长度=1500-20=1480B
因为质检部网络的MTU(Maximum Transfer Unit，最大传送单元)=800B，
即一个数据报片的最大长度为800B(IP首部长度+IP数据部分长度)
因为分片尽可能大——>IP数据部分长度尽可能长，即IP首部长度取最小值，即取固定长度20字节
最终的分片效果如下图所示：
所以一个最大分片所封装的数据载荷部分的字节数=800-20=780B
第二个分片的片偏移=780*(2-1)/8=97.5
MF(More Fragment),MF=1表示后面"还有分片"的数据报，MF=0表示这已是若干数据报片中的最后一个。
因第二个分片后没有分片，故MF=0
```

![image-20211231093353651](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112310933771.png)

为什么不能这样分片呢？

> 片偏移量必须为正数，第二个分片的片偏移量并不是整数，故不能这样分片。

分片数据部分的最大长度可取小于780且能整除8的最大整数：(780/8)向下取整 X 8=776

故最终的分片效果如下图所示：

![image-20211231100703973](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112311007086.png)

```
一个最大分片所封装的数据载荷部分的字节数是776B，第二个分片的片偏移量是776*(2-1)/8=97
第二个分片首部中的MF标志位的取值为0，表示其后面没有分片。
```



考察知识点：TCP报文段首部格式的理解

![image-20211229094548789](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112290945876.png)

一个字节=8比特

1位十六进制数=4位二进制数(4个比特)

4位十六进制数=16位二进制数(16个比特)

8位十六进制数=32位二进制数(32个比特)

![image-20220101182623373](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202201011826450.png)

```
参考解答：
(1)源端口占开头的16比特，即占开头的2字节，
对应的十六进制数为c000，转换成十进制为12*16^3=49152
目的端口占源端口的后两个字节，对应的十六进制数为0050，
转换成十进制为5*16^1=80
(2)
TCP报文段的首部格式中的序号字段指出本TCP报文段数据载荷的第一个字节的序号。
(首部中的序号字段指的是本报文段所发送数据的第一个字节的序号)
序号字段是目的端口后的32比特，即4字节，对应的十六进制数为001a 6b08
转换成十进制数为8*16^0+11*16^2+6*16^3+10*16^4+1*16^5=8+2816+24576+655360
+1048576=1731336
∴该TCP报文段的数据载荷部分的第一个字节的序号为1731336
(3)数据偏移字段指出TCP报文段的数据起始处距离TCP报文段的起始处有多远。
这个字段实际上指出TCP报文段的首部长度。
数据偏移字段占4比特，即在确认号后面的4比特，对应的十六进制数为6，
转换成十进制数为6*16^0=6，因为数据偏移部分以4字节为单位，因此
首部长度=6*4=24字节
**(4)
根据(1)中所分析出的目的端口号为80可知，该TCP报文段的数据载荷是由HTTP协议封装的协议数据单元PDU。
**(5)
TCP报文段的首部格式中的窗口字段，对应的十六进制数为00a0，
转换成十进制数为10*16^1=160。
∴发送该TCP报文段的主机的接收窗口大小是160，单位为字节。
```



考察知识点：子网划分、默认路由 

![image-20211229094710305](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112290947367.png)

+ 取消本着节约IP地址的原则，划分子网(必须掌握)

<font color="red">第1问确定子网号的位数，写得不清晰。故重写一遍。</font>

```
参考解答：
(1)
假设子网号的位数为n，
则n必须满足
2^n>=5——①
2^(8-n)-2>=25+1(主机数+路由器接口数)——②
解①得：n>=3
解②得：n<=3
∴n=3
∴网络号+子网号=27位
∴子网掩码为255.255.255.224.0
划分出的8个子网分别为：
218.75.230.00000000
218.75.230.00100000
218.75.230.01000000
218.75.230.01100000
218.75.230.10000000
218.75.230.10100000
218.75.230.11000000
218.75.230.11100000
选择上述子网中的前5个子网分配给相应的网络，即
网络1：218.75.230.00000000，转换成十进制为218.75.230.0/27，
网络2：218.75.230.00100000，转换成十进制为218.75.230.32/27，
网络3：218.75.230.01000000，转换成十进制为218.75.230.64/27，
网络4：218.75.230.01100000，转换成十进制为218.75.230.96/27，
路由器R1与R2之间的点对点链路：218.75.230.10000000，转换成十进制为218.75.230.128/27
```

+ 本着节约IP地址的原则，划分子网(考研时会考)

```
每个网络需要的IP数量(主机IP数+路由器IP数+全0和全1的IP数)
网络1		6+1+2=9<16(2^4)		主机号占4位
网络2		25+1+1=27<32(2^5)	主机号占5位
网络3		12+1+2=15<16(2^4)	主机号占4位
网络4		10+1+2=13<16(2^4)	主机号占4位
```

```
链路		2+2=4<=4(2^2)	主机号占2位
分配的地址：
```

| 网络名 |     网络地址     |     广播地址     |   可用IP地址段(主机IP+路由器IP)   |
| :----: | :--------------: | :--------------: | :-------------------------------: |
| 网络1  | 218.75.230.0/28  | 218.75.230.15/28 | 218.75.230.1/28~218.75.230.14/28  |
| 网络2  | 218.75.230.16/27 | 218.75.230.47/27 | 218.75.230.17/27~218.75.230.46/27 |
| 网络3  | 218.75.230.48/28 | 218.75.230.63/28 | 218.75.230.49/28~218.75.230.62/28 |
| 网络4  | 218.75.230.64/28 | 218.75.230.79/28 | 218.75.230.65/28~218.75.230.78/28 |
| 网络5  | 218.75.230.80/30 | 218.75.230.83/30 | 218.75.230.81/30~218.75.230.82/30 |



原本的解答：

```
(1)从该地址块中取出5个字块——>需划分出5个子网
∵2^2<5<2^3 ∴需借用3位主机号，来充当网络号
所以子网掩码为/27，即255.255.255.11100000，
转换成十进制为255.255.255.224
划分出的8个子网分别为：
218.75.230.00000000
218.75.230.00100000
218.75.230.01000000
218.75.230.01100000
218.75.230.10000000
218.75.230.10100000
218.75.230.11000000
218.75.230.11100000
选择上述子网中的前5个子网分配给相应的网络，即
网络1：218.75.230.00000000，转换成十进制为218.75.230.0/27，
该网络有30个有效的IP地址，满足6台主机和路由器的一个接口的要求
网络2：218.75.230.00100000，转换成十进制为218.75.230.32/27，
该网络有30个有效的IP地址，满足25台主机和路由器的一个接口的要求
网络3：218.75.230.01000000，转换成十进制为218.75.230.64/27，
该网络有30个有效的IP地址，满足12台主机和路由器的一个接口的要求
网络4：218.75.230.01100000，转换成十进制为218.75.230.96/27，
该网络有30个有效的IP地址，满足10台主机和路由器的一个接口的要求
路由器R1与R2之间的点对点链路：218.75.230.10000000，转换成十进制为218.75.230.128/27
(2)
路由器连接网络的接口，不妨取该网络中的最大IP地址
路由器与路由器之间的接口，一个取链路网络的最小IP地址，一个取链路网络的最大IP地址
故
路由器R1的接口1的IP地址为218.75.230.30，子网掩码为255.255.255.224
路由器R1的接口2的IP地址为218.75.230.62，子网掩码为255.255.255.224
路由器R1的接口3的IP地址为218.75.230.129，子网掩码为255.255.255.224
路由器R2的接口1的IP地址为218.75.230.126，子网掩码为255.255.255.224
路由器R2的接口2的IP地址为218.75.230.94，子网掩码为255.255.255.224
路由器R2的接口3的IP地址为218.75.230.158，子网掩码为255.255.255.224
```

![image-20211231072638421](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112310726601.png)

```
(3)
网络1默认网关的IP地址为218.75.230.30/27
网络2默认网关的IP地址为218.75.230.62/27
网络3默认网关的IP地址为218.75.230.94/27
网络4默认网关的IP地址为218.75.230.126/27
**(4)(添加默认路由即可)
给路由器R1添加的路由条目：0.0.0.0 0.0.0.0 218.75.230.158
给路由器R2添加的路由条目: 0.0.0.0 0.0.0.0 218.75.230.129
```



考察知识点：IP地址、循环冗余码的计算

![image-20211229112939115](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112291129184.png)

```
1.参考解答：
网络地址=IP地址和子网掩码相与，即
00001010.01010000.00000000.00000000
and
11111111.11100000.00000000.00000000
得00001010.01000000.00000000.00000000，转换成十进制为10.64.0.0

广播地址：主机号部分全置为1
∴广播地址为10.01011111.11111111.11111111，转换成十进制为10.95.255.255
∵用户地址介于网络地址和广播地址之间
∴最小用户地址为10.64.0.1，最大用户地址为10.95.255.254

2.参考解答：
多项式G(x)=x^5+x^4+x^2+1——>除数为110101
除数的位数=n+1=6得n=5，所以原始数据加5位0，即10011010110100000
100110101101÷110101，余数为11110，即CRC循环冗余码为11100
```



考察知识点：TCP拥塞控制方法

![image-20211229095901863](https://gitee.com/gujiakai/pic-go-typora02/raw/master/img/202112290959931.png)

```
注：题目中的第9轮次和第12轮次请忽略，是干扰项。

参考解答：
(1)起始时，A设置的拥塞窗口门限是8。
因为第1轮次到第4轮次，拥塞窗口的大小成倍增加，
接着，拥塞窗口按线性规律缓慢增加，故
拥塞窗口门限是8，小于拥塞窗口门限值时，TCP发送报文执行慢开始算法，
大于拥塞窗口门限值时，改用拥塞避免算法。
(2)题中所述的慢启动阶段，即执行慢开始算法阶段。
第1轮次-第4轮次
(3)拥塞避免阶段，拥塞窗口的值按线性规律增加，故
轮次为第4轮次-第6轮次和第7轮次-第8轮次
(4)
第6轮次发生了发送方一连接收到3个重复确认报文
第8轮次发生了发送方的超时重传计时器超时。
```



